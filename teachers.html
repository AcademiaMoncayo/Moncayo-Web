<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maestros - Academia Moncayo</title>
    <link rel="stylesheet" href="src/css/variables.css">
    <link rel="stylesheet" href="src/css/dashboard.css">
    <link rel="stylesheet" href="src/css/teachers.css">
</head>
<body>

    <header class="navbar">
        <div class="nav-left"><h3>Academia Moncayo</h3></div>
        <nav class="nav-center">
            <button class="nav-btn" onclick="window.location.href='dashboard.html'">Inicio</button>
            <button class="nav-btn" onclick="window.location.href='students.html'">Alumnos</button>
            <button class="nav-btn active">Maestros</button>
            <button class="nav-btn" onclick="window.location.href='calendar.html'">Calendario</button>
            <button class="nav-btn" onclick="window.location.href='finanzas.html'">Finanzas</button>
            <button class="nav-btn" onclick="window.location.href='almacen.html'">Almacen</button>
        </nav>
        <div class="nav-right">
            <span id="userDisplay">Admin</span>
        </div>
    </header>

    <main class="main-content">
        <div class="page-header">
            <h1>Gesti√≥n de Maestros</h1>
            <button id="btnOpenModal" class="btn-primary" style="box-shadow: 0 4px 6px rgba(0,0,0,0.1);">+ Nuevo Maestro</button>
        </div>

        <div class="content-card">
            <div class="toolbar">
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="üîç Buscar maestro...">
                </div>
                <div class="filter-box">
                    <label>Estado:</label>
                    <select id="filterStatus">
                        <option value="todos">Todos</option>
                        <option value="activo">Activos</option>
                        <option value="inactivo">Inactivos</option>
                    </select>
                </div>
            </div>

            <div class="table-container">
                <table>
<thead>
    <tr>
        <th>Nombre</th>
        <th>Usuario / Acceso</th>
        <th>Especialidad</th>
        <th>D√≠as</th>
        <th style="min-width: 180px;">Estad√≠sticas de Clases</th>
        <th>Estado</th>
        <th>Acciones</th>
    </tr>
</thead>
                    <tbody id="tableBody"></tbody>
                </table>
                <p id="noResults" class="hidden" style="text-align:center; padding: 20px; color:#666;">No se encontraron maestros.</p>
            </div>

            <div class="pagination-controls">
                <button id="btnPrevPage" disabled>‚ùÆ Anterior</button>
                <span id="pageIndicator" style="font-size: 14px; color: #666;">P√°gina 1</span>
                <button id="btnNextPage">Siguiente ‚ùØ</button>
            </div>
        </div> 
    </main>

    <div id="modalContainer" class="modal-overlay hidden">
        <div class="modal-content" style="width: 550px;"> <div class="modal-header">
                <h3>Nuevo Maestro</h3>
                <span id="btnCloseModal" class="close-btn">&times;</span>
            </div>
            <form id="formTeacher">
                <label>Nombre Completo:</label>
                <input type="text" id="newNombre" required placeholder="Ej. Juan P√©rez">

                <div class="form-row">
                    <div style="flex:1">
                        <label>Usuario (Login):</label>
                        <input type="text" id="newUsuario" required placeholder="juan.perez">
                    </div>
                    <div style="flex:1">
                        <label>Contrase√±a:</label>
                        <input type="password" id="newPassword" required placeholder="******">
                    </div>
                </div>

                <label>Especialidades (Selecciona):</label>
                <div class="instruments-grid">
                    <label><input type="checkbox" name="instrumentos" value="Canto"> Canto</label>
                    <label><input type="checkbox" name="instrumentos" value="Piano"> Piano</label>
                    <label><input type="checkbox" name="instrumentos" value="Bater√≠a"> Bater√≠a</label>
                    <label><input type="checkbox" name="instrumentos" value="Viol√≠n"> Viol√≠n</label>
                    <label><input type="checkbox" name="instrumentos" value="Guitarra El√©ctrica"> Guitarra El√©ctrica</label>
                    <label><input type="checkbox" name="instrumentos" value="Guitarra Ac√∫stica"> Guitarra Ac√∫stica</label>
                    <label><input type="checkbox" name="instrumentos" value="Bajo"> Bajo</label>
                    <label><input type="checkbox" name="instrumentos" value="Ukulele"> Ukulele</label>
                </div>

                <label>D√≠as Disponibles:</label>
                <div class="days-checkbox-container">
                    <label><input type="checkbox" name="dias" value="Lun"> Lun</label>
                    <label><input type="checkbox" name="dias" value="Mar"> Mar</label>
                    <label><input type="checkbox" name="dias" value="Mi√©"> Mi√©</label>
                    <label><input type="checkbox" name="dias" value="Jue"> Jue</label>
                    <label><input type="checkbox" name="dias" value="Vie"> Vie</label>
                    <label><input type="checkbox" name="dias" value="S√°b"> S√°b</label>
                </div>

                <button type="submit" class="btn-save">Guardar Maestro</button>
            </form>
        </div>
    </div>

    <div id="modalEditar" class="modal-overlay hidden">
        <div class="modal-content" style="width: 550px;">
            <div class="modal-header">
                <h3>Editar Maestro</h3>
                <span id="btnCloseEditar" class="close-btn">&times;</span>
            </div>
            <form id="formEditar">
                <input type="hidden" id="editId">
                <input type="hidden" id="editStatus">

                <label>Nombre Completo:</label>
                <input type="text" id="editNombre" required>

                <div class="form-row">
                    <div style="flex:1">
                        <label>Usuario:</label>
                        <input type="text" id="editUsuario" required>
                    </div>
                    <div style="flex:1">
                        <label>Contrase√±a:</label>
                        <input type="text" id="editPassword" required placeholder="Nueva contrase√±a">
                    </div>
                </div>

                <label>Especialidades:</label>
                <div class="instruments-grid">
                    <label><input type="checkbox" name="editInstrumentos" value="Canto"> Canto</label>
                    <label><input type="checkbox" name="editInstrumentos" value="Piano"> Piano</label>
                    <label><input type="checkbox" name="editInstrumentos" value="Bater√≠a"> Bater√≠a</label>
                    <label><input type="checkbox" name="editInstrumentos" value="Viol√≠n"> Viol√≠n</label>
                    <label><input type="checkbox" name="editInstrumentos" value="Guitarra El√©ctrica"> Guitarra El√©ctrica</label>
                    <label><input type="checkbox" name="editInstrumentos" value="Guitarra Ac√∫stica"> Guitarra Ac√∫stica</label>
                    <label><input type="checkbox" name="editInstrumentos" value="Bajo"> Bajo</label>
                    <label><input type="checkbox" name="editInstrumentos" value="Ukulele"> Ukulele</label>
                </div>

                <label>D√≠as Disponibles:</label>
                <div class="days-checkbox-container">
                    <label><input type="checkbox" name="editDias" value="Lun"> Lun</label>
                    <label><input type="checkbox" name="editDias" value="Mar"> Mar</label>
                    <label><input type="checkbox" name="editDias" value="Mi√©"> Mi√©</label>
                    <label><input type="checkbox" name="editDias" value="Jue"> Jue</label>
                    <label><input type="checkbox" name="editDias" value="Vie"> Vie</label>
                    <label><input type="checkbox" name="editDias" value="S√°b"> S√°b</label>
                </div>

                <button type="submit" class="btn-save" style="background-color: #ffc107; color: #333; margin-top:20px;">Actualizar Datos</button>
            </form>
        </div>
    </div>

    <div id="modalAlumnos" class="modal-overlay hidden">
        <div class="modal-content" style="width: 700px; max-height: 90vh; overflow-y: auto;">
            <div class="modal-header">
                <h3>üìã Expediente de Clases</h3>
                <span id="btnCloseAlumnos" class="close-btn">&times;</span>
            </div>

            <div style="background: #e3f2fd; padding: 15px; border-radius: 8px; margin-bottom: 20px; border: 1px solid #bbdefb;">
                <h2 style="margin:0; font-size:18px; color:#0d47a1;" id="tituloMaestro">Maestro: ...</h2>
                <p style="margin:5px 0 0; color:#555; font-size:13px;" id="subtituloMaestro">Total clases registradas: 0</p>
            </div>

            <h4 class="section-title">üìÖ Horario Semanal (Clases Fijas)</h4>
            <div class="table-container" style="margin-bottom: 25px;">
                <table style="font-size: 13px;">
                    <thead>
                        <tr style="background:#f1f1f1;">
                            <th>D√≠a</th>
                            <th>Horario</th>
                            <th>Alumno</th>
                            <th>Instrumento</th>
                        </tr>
                    </thead>
                    <tbody id="tablaFijas">
                        </tbody>
                </table>
            </div>

            <h4 class="section-title">‚ú® Historial (Muestras, √önicas y Pasadas)</h4>
            <div class="table-container">
                <table style="font-size: 13px;">
                    <thead>
                        <tr style="background:#f1f1f1;">
                            <th>Fecha</th>
                            <th>Tipo</th>
                            <th>Horario</th>
                            <th>Alumno (Prospecto)</th>
                            <th>Instrumento</th>
                        </tr>
                    </thead>
                    <tbody id="tablaHistorial">
                        </tbody>
                </table>
            </div>
            <div class="pagination-controls" style="margin-top: 10px; margin-bottom: 20px; justify-content: center;">
                <button id="btnModalPrev" disabled>‚ùÆ Anterior</button>
                <span id="lblModalPage" style="font-size: 13px; font-weight: bold; margin: 0 10px;">P√°gina 1</span>
                <button id="btnModalNext" disabled>Siguiente ‚ùØ</button>
            </div>

            <div style="text-align: right; border-top: 1px solid #eee; padding-top: 15px;">
                <button class="btn-save" id="btnCerrarDetalle" style="width: auto; background:#6c757d;">Cerrar Expediente</button>
            </div>
        </div>
    </div>
            <div style="text-align: right; margin-top: 20px;">
                <button class="btn-save" id="btnCerrarDetalle" style="width: auto; background:#6c757d;">Cerrar</button>
            </div>
        </div>
    </div>

<div id="modalConfirm" class="modal-overlay hidden">
        <div class="modal-content">
            <div style="font-size: 50px; margin-bottom: 15px; animation: bounce 1s infinite;">‚ö†Ô∏è</div>
            <h3 id="confirmTitle" style="margin: 0; color: #333;">¬øEst√°s seguro?</h3>
            <p id="confirmMessage" style="color: #666; margin: 10px 0 25px;">Esta acci√≥n es irreversible.</p>
            
            <div style="display: flex; gap: 10px; justify-content: center;">
                <button id="btnCancelConfirm" style="background:#e0e0e0; color:#333; border:none; padding:10px 20px; border-radius:6px; cursor:pointer;">Cancelar</button>
                <button id="btnOkConfirm" style="background:#c62828; color:white; border:none; padding:10px 20px; border-radius:6px; cursor:pointer; font-weight:bold;">S√≠, Continuar</button>
            </div>
        </div>
    </div>

    <div id="toast-container"></div>

    <script type="module" src="src/js/teachers.js"></script>
</body>
</html>