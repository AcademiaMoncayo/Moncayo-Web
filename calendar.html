<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calendario - Academia Moncayo</title>
    <link rel="stylesheet" href="src/css/variables.css">
    <link rel="stylesheet" href="src/css/dashboard.css">
    <link rel="stylesheet" href="src/css/calendar.css">
</head>
<body>

    <header class="navbar">
        <div class="nav-left"><h3>Academia Moncayo</h3></div>
        <nav class="nav-center">
            <button class="nav-btn" onclick="window.location.href='dashboard.html'">Inicio</button>
            <button class="nav-btn" onclick="window.location.href='students.html'">Alumnos</button>
            <button class="nav-btn" onclick="window.location.href='teachers.html'">Maestros</button>
            <button class="nav-btn active">Calendario</button>
            <button class="nav-btn" onclick="window.location.href='finance.html'">Finanzas</button>
        </nav>
        <div class="nav-right">
            <span id="userDisplay">Admin</span>
        </div>
    </header>

    <main class="main-content">
        
        <div class="page-header">
            <h1>Calendario de Clases</h1>
            <div style="display:flex; gap:15px; align-items:center;">
                <button id="btnNewEvent" class="btn-primary" style="background-color: var(--color-accent);">
                    üìÖ Agregar Evento
                </button>
                
                <div class="date-selector">
                    <button id="btnPrevDay" class="nav-arrow">‚ùÆ</button>
                    <input type="date" id="calendarDate">
                    <button id="btnNextDay" class="nav-arrow">‚ùØ</button>
                    <button id="btnToday" class="btn-today">Hoy</button>
                </div>
            </div>
        </div>

        <div class="content-card calendar-card">
            <div class="calendar-legend">
                <span class="legend-item"><span class="dot available"></span> Disponible</span>
                <span class="legend-item"><span class="dot occupied"></span> Ocupado (Fija)</span>
                <span class="legend-item"><span class="dot trial"></span> Clase Muestra</span>
            </div>

            <div class="calendar-wrapper">
                <table id="calendarTable">
                    <thead>
                        <tr id="headerRow">
                            <th class="time-col-header">Horario</th>
                            </tr>
                    </thead>
                    <tbody id="calendarBody">
                        </tbody>
                </table>
            </div>
        </div> 
    </main>

    <div id="modalEvent" class="modal-overlay hidden">
        <div class="modal-content" style="width: 500px;">
            <div class="modal-header">
                <h3>Nuevo Evento / Clase</h3>
                <span id="btnCloseEvent" class="close-btn">&times;</span>
            </div>
            <form id="formEvent">
                <input type="hidden" id="editEventId">

                <label>1. Tipo de Evento:</label>
                <select id="eventType" required>
                    <option value="">-- Selecciona --</option>
                    <option value="fija">üîÑ Clase Fija (Semanal)</option>
                    <option value="muestra">‚ú® Clase Muestra (Prospectos)</option>
                    <option value="unica">üìÖ Clase √önica / Reposici√≥n</option>
                    <option value="junta">ü§ù Junta / Otro</option>
                </select>

                <label>2. Especialidad / Instrumento:</label>
                <select id="eventInstrument" required disabled>
                    <option value="">-- Primero selecciona tipo --</option>
                    <option value="Canto">Canto</option>
                    <option value="Piano">Piano</option>
                    <option value="Bater√≠a">Bater√≠a</option>
                    <option value="Viol√≠n">Viol√≠n</option>
                    <option value="Guitarra El√©ctrica">Guitarra El√©ctrica</option>
                    <option value="Guitarra Ac√∫stica">Guitarra Ac√∫stica</option>
                    <option value="Bajo">Bajo</option>
                    <option value="Ukulele">Ukulele</option>
                    <option value="Otro">Otro / Junta</option>
                </select>

                <label>3. Maestro:</label>
                <select id="eventTeacher" required disabled>
                    <option value="">-- Selecciona especialidad --</option>
                </select>

                <div class="form-row">
                    <div style="flex:1">
                        <label>Fecha Inicio:</label>
                        <input type="date" id="eventDate" required>
                    </div>
                    <div style="flex:1">
                        <label>Hora (2pm - 8pm):</label>
                        <select id="eventTime" required>
                            <option value="14:00">2:00 PM</option>
                            <option value="15:00">3:00 PM</option>
                            <option value="16:00">4:00 PM</option>
                            <option value="17:00">5:00 PM</option>
                            <option value="18:00">6:00 PM</option>
                            <option value="19:00">7:00 PM</option>
                            <option value="20:00">8:00 PM</option>
                        </select>
                    </div>
                </div>

                <label>5. Alumno:</label>
                <input list="listStudents" id="eventStudentInput" placeholder="Escribe nombre..." disabled style="width:100%; padding:10px; margin-bottom:10px; border:1px solid #ddd; border-radius:5px;">
                <datalist id="listStudents">
                    </datalist>
                <input type="hidden" id="eventStudentId"> 
                
                <label>Nota / Detalles:</label>
                <textarea id="eventNote" rows="2" placeholder="Ej. Traer partituras..."></textarea>

                <button type="submit" class="btn-save" style="margin-top:15px;">Guardar Evento</button>
            </form>
        </div>
    </div>

    <script type="module" src="src/js/calendar.js"></script>

</body>
</html>